# Крестики – Нолики
## Создайте свою игру крестики-нолики, используя данную инструкцию. В конце вы получите полноценную игру и основные навыки в программировании на языке C#.
### 1. Этап: Начало
Первым делом вам нужно открыть ***Visual Studio > Создание проекта > Приложение Windows Forms (.NET Framework) > Далее > Создать***. И вот перед вами должно открыться окно:

![](https://i.pinimg.com/736x/16/13/f2/1613f2dde0e8c933a004f1cb807ef955.jpg)
   
Далее, если у вас не открылась Панель элементов, то ***-> Вид > Панель Элементов***.(Ctrl + Alt + X).

### 2. Этап: Форма
* Для начала вам необходимо создать вашу первую кнопку. В панеле элементов ищем "button" и перетаскиваем её на форму. Зададим ей несколько важных свойств (Правой кнопкой мыши на кнопку > свойства):

   - Size - 200; 200.
   - Location - 12; 12.
     
* Создаём ещё 8 кнопок (Ctrl + C > Ctrl + V)

![](https://i.pinimg.com/originals/7f/8b/99/7f8b99e2d3dbad7ecd74cfbf57e067fa.png)
         
Нажимаем на первую кнопку два раза. И у вас откроестся окно для написания кода.
     
* Далее после "public Form1()" мы должны добавить.(размер формы)
```c#
"InitializeComponent();
this.Height = 700;
this.Width = 950;
```   
* В метод "button1_Click" добавляем.

```c#
sender.GetType().GetProperty("Text").SetValue(sender, "x");
```
Этот код даёт нам x при нажатии на любую кнопку. Проверить это можно, если просто нажать на "Пуск" и попробовать нажать на любую кнопку, но перед этим в свойствах выбрать действия и в "Click" вставить "button1_Click", а для Font - Microsoft Sans Serif; 138,25pt.

![image](https://github.com/Diana0986/tic-tac-toe/assets/158996710/b32e1d9b-4762-412e-b3fc-dc3ed7ae5653)

### 3. Этап: Игрок

В игре *"Крестики — Нолики"* по правилам должно быть 2 игрока. Поэтому сейчас вы сделаете так, чтобы программа вам показывала какой конкретно игрок ходит, а также чтобы у каждого игрока был свой знак в игре.

* Нам нужно объявить переменную, например "player", чтобы использовать её в дальнейшем.

&nbsp;&nbsp;&nbsp;Добавляем перед "public Form1()":
  ```c#
  private int player;
  ```
&nbsp;&nbsp;&nbsp;Добавляем в "public Form1()"
  ```c#
  player = 1;
  ```
  
* Далее нам необходимо, дать понять программе, что первый игрок ходит *"крестиками"*, а второй *"ноликами"*. Для этого мы используем конструкцию switch и расположим её в "button1_Click".
```c#           
    switch (player)
    {
        case 1:
            sender.GetType().GetProperty("Text").SetValue(sender, "x");
            player = 0;
            break;
        case 0:
            sender.GetType().GetProperty("Text").SetValue(sender, "o");
            player = 1;
            break;
    }
```
Здесь мы используем player как переменную, на которую будем опираться при выборе действия. После "case" мы пишем при каком значение происходит действие, а дальше мы вписываем само действие. Первая строчка состоит из *sender* (сам объект к которому применён метод "button1_Click"), *GetType()* (метод, который возвращает тип объекта), *GetProperty("Text")* (программа получает информацию о свойстве "Text" данного объекта), *SetValue(sender, "x")* (устанавливает значение "x" в свойство "Text" объекта "sender"). Вторая строчка даёт понять программе, что после того как игрок номер 1 (player = 1), нажимая на кнопку и тем самым установив на ней "x", меняется на игрока номер 2 (player = 2). И третья строчка "break" используется для остановки.

* Следующим шагом нам нужно где-то отображать какой именно игрок ходит. Мы переходим обратно в форму и рядом с нашими кнопками добавляем из панели элементов "Label" со свойствами:
    - Location - 651; 26
    - Size - 46; 17
    - Front - Microsoft Sans Serif; 10,25pt.

* Далее возвращаемся к коду и рядом с переменной player задаём текст для "label1":
```c#
label1.Text = "Текущий ход: Игрок 1";
```
* После того как игрок 1 походил, чтобы текст изменился на "Текущий ход: Игрок 1", для этого в конструкцию "swith" в "case 1" после "player = 0" вставляем :
```c#
label1.Text = "Текущий ход: Игрок 2";
```
И также в "case 0":
```c#
label1.Text = "Текущий ход: Игрок 1";
```

* Вы уже можете запустить вашу программу и посмотреть, что когда вы ходите *"крестиками"*, отображается "Текущий ход: Игрок 1", а когда *"ноликами"* "Текущий ход: Игрок 2". Но когда мы нажимаем на кнопку второй раз, то поставленный знак меняется на другой. Нам нужно это устранить, а точнее, вставить после конструкции "switch" :
```c#
sender.GetType().GetProperty("Enabled").SetValue(sender, false);
```

Данный код меняет true на false в свойстве Enabled, то есть делает наши кнопки недоступными. И у нас получилось, что после нажатия,э программа определяет какой ты игрок, ставит нужный знак, а потом делает кнопку недоступной.

![image](https://github.com/Diana0986/tic-tac-toe/assets/158996710/65921625-7f2d-4f84-94a2-92215d38a8a4)


### 4. Этап: Победа

Победа в нашей игре означает, что игрок расположил свой знак:

* Или в строку по горизонтали (их 3 возможных);
* Или в строку по вертикале (их 3 возможных);
* Или по диагонали (их 2 возможных);
  
Получается для того, чтобы вычислить победил ли игрок, нужно перебрать все 8 строк. И когда программа найдёт ту строку, в которой значение кнопок одинаковое, она должна оповестить игрока. И так, начнём:

* Во-первых, для этого создадим новую функцию и назовём её, например, "playerwin" (добавляем после последней функции):
```c#
private void playerwin()
{
}
```
* Во-вторых, мы используем оператор if, который и вставим в новый метод:
```c#
    if (buttons[0, 0].Text == buttons[0, 1].Text && buttons[0, 1].Text == buttons[0, 2].Text)
    {
        if (buttons[0, 0].Text != "")
            MessageBox.Show("Вы победили!");
        }
        return;
    }
    if (buttons[1, 0].Text == buttons[1, 1].Text && buttons[1, 1].Text == buttons[1, 2].Text)
    {
        if (buttons[1, 0].Text != "")
            MessageBox.Show("Вы победили!");
    }
    if (buttons[2, 0].Text == buttons[2, 1].Text && buttons[2, 1].Text == buttons[2, 2].Text)
    {
        if (buttons[2, 0].Text != "")
            MessageBox.Show("Вы победили!");
        return;
    }
    if (buttons[0, 0].Text == buttons[1, 0].Text && buttons[1, 0].Text == buttons[2, 0].Text)
    {
        if (buttons[0, 0].Text != "")
            MessageBox.Show("Вы победили!");
        return;
    }
    if (buttons[0, 1].Text == buttons[1, 1].Text && buttons[1, 1].Text == buttons[2, 1].Text)
    {
        if (buttons[0, 1].Text != "")
            MessageBox.Show("Вы победили!");
        return;
    }
    if (buttons[0, 2].Text == buttons[1, 2].Text && buttons[1, 2].Text == buttons[2, 2].Text)
    {
        if (buttons[0, 2].Text != "")
            MessageBox.Show("Вы победили!");
        return;
    }
    if (buttons[0, 0].Text == buttons[1, 1].Text && buttons[1, 1].Text == buttons[2, 2].Text)
    {
        if (buttons[0, 0].Text != "")
            MessageBox.Show("Вы победили!");
        return;
    }
    if (buttons[2, 0].Text == buttons[1, 1].Text && buttons[1, 1].Text == buttons[0, 2].Text)
    {
        if (buttons[2, 0].Text != "")
            MessageBox.Show("Вы победили!");
        return;
    }
```

Если вы хорошо посмотрите этот код, то увидите квадратные скобки. Это мы так обозначили кнопки, а именно как элементы массива:

|[0;0]|[0;1]|[0;2]|
|-|-|-|
|[1;0]|[1;1]|[1;2]|
|[2;0]|[2;1]|[2;2]|
    
А сделали мы это на будущее, так как потом мы создадим массив.

![image](https://github.com/Diana0986/tic-tac-toe/assets/158996710/4d7706bb-4008-46b6-bc5f-a553da3fbca2)
![image](https://github.com/Diana0986/tic-tac-toe/assets/158996710/2b95ede1-e8e9-409b-ad8e-d7361843530c)



### 5. Этап: Хочу ещё
       
Когда вы сыграли раунд, предположительно вам захочется сыграть и второй, но завершать откладку и запускать её заново это долго и неудобно. Поэтому давайте создадим кнопку рестарта. Перед тем как начать удалите все 9 главных кнопок в форме. :)

* Переходим в форму и рядом с нашими кнопками добавляем ещё одну кнопку. Зададим ей несколько важных свойств (Правой кнопкой мыши на кнопку > свойства):

    * name - buttonPlay
    * Location - 693; 222
    * Size - 160; 50
    * Text - Сброс процесса
    * Front - Microsoft Sans Serif; 10,25pt.
  
Нажимаем на эту кнопку два раза и переходим к коду.

* Далее нам нужно создать двухмерный массив кнопок и заполнить его. Перед "private int player;" мы напишем:
```c#
private Button[,] buttons = new Button[3, 3];
```
Для заполнения мы используем цикл for (записываем сразу после):
```c#
for (int i = 0; i < buttons.Length / 3; i++)
{
   for (int j = 0; j < buttons.Length / 3; j++)
   {
      buttons[i, j] = new Button();
      buttons[i, j].Size = new Size(200, 200);
   }
}
```
Цикл for будет создавать кнопку нужного размера на каждый элемент массива.

* Мы создали новые кнопки. Теперь создадим функцию, с помощью которой мы их расположим. После "public Form()" нужно вставить:
```c#
private void setButtons()
```
И в неё добавим:
```c#
{
    for (int i = 0; i < 3; i++)
    {
        for (int j = 0; j < 3; j++)
        {
            buttons[i, j].Location = new Point(12 + 206 * j, 12 + 206 * i);
            buttons[i, j].Click += button1_Click;
            buttons[i, j].Font = new Font(new FontFamily("Microsoft Sans Serif"), 138);
            this.Controls.Add(buttons[i, j]);
        }
    }
}
```
Первая строка во втором цикле for — определяет положение кнопки, вторая строка — добавляет кнопке обработку на нажатие, третья строка — задаёт свойства тексту внутри этих кнопок, а четвёртая — создаёт сами кнопки. И эту функцию мы добавляем в "public Form1" после циклы for.

* Теперь напишем сброс нашего игрового процесса. В метод "buttonPlay_Click" вписываем код:
```c#
{
   for (int i = 0; i < 3; i++)
   {
      for (int j = 0; j < 3; j++)
      {
         buttons[i, j].Text = "";
         buttons[i, j].Enabled = true;
      }
   }
}
```
В этом коде мы в каждой кнопке удалили текст, и сделали каждую кнопку обратно доступной.

![image](https://github.com/Diana0986/tic-tac-toe/assets/158996710/fd0bcc61-013e-4b52-a21a-41a4f3baca24)

![image](https://github.com/Diana0986/tic-tac-toe/assets/158996710/186f8da4-d1c6-4346-9bdd-0537b3fa3408)


### 6. Этап: Баллы (Необязательно)

Когда вы закончите игру, вам может стать интересно кто же из двух игроков победил и для этого нужно сделать какой-то счётчик. Так давайте сделаем это:

* Переходим в форму и создаём 2 - "Label" и задаём им свойства:

    * Location - 640; 165(label2),  768; 165(label3)
    * size - 46; 17
    * Front - Microsoft Sans Serif; 10,25pt.
    
* Задаём двум переменным label2 и label3 значение:
```c#
label2.Text = "Побед у Игрока 1\n0";
label3.Text = "Побед у Игрока 2\n0";
```
И распологаем их после переменной label1.Text.

* После создаём две переменные для подсчёта побед игроков, располагая код после "private int player;":
```c#
private int point;
private int point1;
```
И задаём им значение ноль:
```c#
point = 0;
point1 = 0;
```
Далее создаём функцию points после "buttonPlay_Click"
```c#
private void points()
```
И добавляем в неё конструкцию switch:
```c#
{
    switch (label1.Text)
    {
        case "Текущий ход: Игрок 2":
            point += 1;
            label2.Text = $"Побед у Игрока 1\n{point}";
            break;
        case "Текущий ход: Игрок 1":
            point1 += 1;
            label3.Text = $"Побед у Игрока 2\n{point1}";
            break;
    }
}
```
            
Этот код работает так, что если высвевивается "Текущий ход: Игрок 2" после оповещения (если после оповещения высвечивается Игрок 2 это значит что предыдущий ход, который и привел к победе, был у Игрока 1), то к числу побед первого (point) прибавляется 1 и после этого высвечивается на форме (переменная label2.Text изменяется). И если Текущий ход: Игрок 1 - анологично.

* Теперь, чтобы эта функция заработала, нужно её добавить в playerwin в конструкцию if перед каждым "MessageBox":
```c#
points();
```
![image](https://github.com/Diana0986/tic-tac-toe/assets/158996710/5a69cea9-59ef-4966-98bd-0dfe3ea17de1)

![image](https://github.com/Diana0986/tic-tac-toe/assets/158996710/895c38b9-460a-4190-87fc-236475a871fb)

## Итоги

И сделав все этапы, у вас должна получиться игра как на картинке ниже. Надеемся, что вам понравилось :):)

![image](https://github.com/Diana0986/tic-tac-toe/assets/158996710/79f9809e-ec04-428b-ace5-1e016d733672)



   


        
        
     
     
 
